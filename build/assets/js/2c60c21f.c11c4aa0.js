"use strict";(self.webpackChunkdip_docs=self.webpackChunkdip_docs||[]).push([[2346],{6755:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"wttp/wttp-deployment","title":"WTTP Deployment","description":"This comprehensive guide covers all aspects of deploying WTTP Site contracts, from initial setup to production deployment and ongoing maintenance.","source":"@site/docs/03-wttp/07-deployment.md","sourceDirName":"03-wttp","slug":"/wttp/wttp-deployment","permalink":"/docs/wttp/wttp-deployment","draft":false,"unlisted":false,"editUrl":"https://github.com/TechnicallyWeb3/dip-docs/tree/main/packages/create-docusaurus/templates/shared/docs/03-wttp/07-deployment.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"id":"wttp-deployment","title":"WTTP Deployment"},"sidebar":"tutorialSidebar","previous":{"title":"WTTP Gateway","permalink":"/docs/wttp/wttp-gateway"},"next":{"title":"Handler Overview","permalink":"/docs/handler/handler-overview"}}');var s=t(4848),r=t(8453);const l={id:"wttp-deployment",title:"WTTP Deployment"},o="WTTP Deployment Guide",a={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Required Software",id:"required-software",level:3},{value:"Required Accounts",id:"required-accounts",level:3},{value:"Network Requirements",id:"network-requirements",level:3},{value:"Installation Methods",id:"installation-methods",level:2},{value:"Method 1: Clone Repository (Recommended)",id:"method-1-clone-repository-recommended",level:3},{value:"Method 2: NPM Package",id:"method-2-npm-package",level:3},{value:"Environment Configuration",id:"environment-configuration",level:2},{value:"1. Create Environment File",id:"1-create-environment-file",level:3},{value:"2. Configure Environment Variables",id:"2-configure-environment-variables",level:3},{value:"3. Network Configuration",id:"3-network-configuration",level:3},{value:"Deployment Options",id:"deployment-options",level:2},{value:"1. Quick Deployment (Zero Parameters)",id:"1-quick-deployment-zero-parameters",level:3},{value:"2. Custom Configuration Deployment",id:"2-custom-configuration-deployment",level:3},{value:"3. Advanced Deployment",id:"3-advanced-deployment",level:3},{value:"Deployment Presets",id:"deployment-presets",level:2},{value:"Header Presets",id:"header-presets",level:3},{value:"CORS Presets",id:"cors-presets",level:3},{value:"Cache Presets",id:"cache-presets",level:3},{value:"Network-Specific Deployment",id:"network-specific-deployment",level:2},{value:"Localhost Development",id:"localhost-development",level:3},{value:"Sepolia Testnet",id:"sepolia-testnet",level:3},{value:"Polygon Mainnet",id:"polygon-mainnet",level:3},{value:"Post-Deployment Setup",id:"post-deployment-setup",level:2},{value:"1. Verify Deployment",id:"1-verify-deployment",level:3},{value:"2. Upload Initial Content",id:"2-upload-initial-content",level:3},{value:"3. Configure Permissions",id:"3-configure-permissions",level:3},{value:"Production Deployment Checklist",id:"production-deployment-checklist",level:2},{value:"Pre-Deployment",id:"pre-deployment",level:3},{value:"Deployment",id:"deployment",level:3},{value:"Post-Deployment",id:"post-deployment",level:3},{value:"Deployment Monitoring",id:"deployment-monitoring",level:2},{value:"1. Transaction Monitoring",id:"1-transaction-monitoring",level:3},{value:"2. Site Health Checks",id:"2-site-health-checks",level:3},{value:"3. Error Monitoring",id:"3-error-monitoring",level:3},{value:"Troubleshooting Deployment Issues",id:"troubleshooting-deployment-issues",level:2},{value:"Common Problems",id:"common-problems",level:3},{value:"1. Gas Estimation Failures",id:"1-gas-estimation-failures",level:4},{value:"2. Network Connection Issues",id:"2-network-connection-issues",level:4},{value:"3. Contract Verification Failures",id:"3-contract-verification-failures",level:4},{value:"Debugging Tools",id:"debugging-tools",level:3},{value:"1. Deployment Logs",id:"1-deployment-logs",level:4},{value:"2. Contract Inspection",id:"2-contract-inspection",level:4},{value:"3. Gas Analysis",id:"3-gas-analysis",level:4},{value:"Security Considerations",id:"security-considerations",level:2},{value:"1. Private Key Management",id:"1-private-key-management",level:3},{value:"2. Access Control",id:"2-access-control",level:3},{value:"3. Contract Security",id:"3-contract-security",level:3},{value:"Maintenance and Updates",id:"maintenance-and-updates",level:2},{value:"1. Regular Maintenance",id:"1-regular-maintenance",level:3},{value:"2. Content Updates",id:"2-content-updates",level:3},{value:"3. Contract Upgrades",id:"3-contract-upgrades",level:3},{value:"Cost Optimization",id:"cost-optimization",level:2},{value:"1. Gas Optimization",id:"1-gas-optimization",level:3},{value:"2. Storage Optimization",id:"2-storage-optimization",level:3},{value:"3. Network Selection",id:"3-network-selection",level:3},{value:"Backup and Recovery",id:"backup-and-recovery",level:2},{value:"1. Site Backup",id:"1-site-backup",level:3},{value:"2. Recovery Procedures",id:"2-recovery-procedures",level:3},{value:"3. Disaster Recovery",id:"3-disaster-recovery",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Deployment Strategy",id:"1-deployment-strategy",level:3},{value:"2. Security",id:"2-security",level:3},{value:"3. Performance",id:"3-performance",level:3},{value:"4. Documentation",id:"4-documentation",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"wttp-deployment-guide",children:"WTTP Deployment Guide"})}),"\n",(0,s.jsx)(n.p,{children:"This comprehensive guide covers all aspects of deploying WTTP Site contracts, from initial setup to production deployment and ongoing maintenance."}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(n.h3,{id:"required-software",children:"Required Software"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Node.js"}),": Version 18 or higher"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"npm"}),": Version 8 or higher"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Git"}),": For cloning the repository"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Hardhat"}),": Will be installed as a dependency"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"required-accounts",children:"Required Accounts"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Ethereum Wallet"}),": MetaMask, WalletConnect, or similar"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"RPC Provider"}),": Infura, Alchemy, or local node"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Block Explorer API"}),": Etherscan, PolygonScan, etc. (for verification)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"network-requirements",children:"Network Requirements"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Testnet ETH"}),": For testing deployments"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Mainnet ETH/MATIC"}),": For production deployments"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Gas Estimation"}),": Understanding of gas costs"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"installation-methods",children:"Installation Methods"}),"\n",(0,s.jsx)(n.h3,{id:"method-1-clone-repository-recommended",children:"Method 1: Clone Repository (Recommended)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Clone the repository\r\ngit clone https://github.com/TechnicallyWeb3/wttp-site.git\r\ncd wttp-site\r\n\r\n# Install dependencies\r\nnpm install\r\n\r\n# Compile contracts\r\nnpm run compile\n"})}),"\n",(0,s.jsx)(n.h3,{id:"method-2-npm-package",children:"Method 2: NPM Package"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Install as npm package\r\nnpm install @wttp/site\r\n\r\n# Configure Hardhat\r\n# Add to hardhat.config.ts\r\nimport "@wttp/site";\n'})}),"\n",(0,s.jsx)(n.h2,{id:"environment-configuration",children:"Environment Configuration"}),"\n",(0,s.jsx)(n.h3,{id:"1-create-environment-file",children:"1. Create Environment File"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Create .env file\r\ncp .env.template .env\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-configure-environment-variables",children:"2. Configure Environment Variables"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# .env file contents\r\nOWNER_MNEMONIC="your twelve word mnemonic phrase here"\r\nETHERSCAN_API_KEY="your_etherscan_api_key_here"\r\nPOLYGONSCAN_API_KEY="your_polygonscan_api_key_here"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"3-network-configuration",children:"3. Network Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'// hardhat.config.ts\r\nimport { HardhatUserConfig } from "hardhat/config";\r\nimport "@wttp/site";\r\n\r\nconst config: HardhatUserConfig = {\r\n  networks: {\r\n    localhost: {\r\n      url: "http://127.0.0.1:8545",\r\n      chainId: 31337,\r\n    },\r\n    sepolia: {\r\n      url: "https://ethereum-sepolia.publicnode.com",\r\n      chainId: 11155111,\r\n      accounts: process.env.OWNER_MNEMONIC ? [process.env.OWNER_MNEMONIC] : [],\r\n    },\r\n    polygon: {\r\n      url: "https://polygon.publicnode.com",\r\n      chainId: 137,\r\n      accounts: process.env.OWNER_MNEMONIC ? [process.env.OWNER_MNEMONIC] : [],\r\n    },\r\n  },\r\n  etherscan: {\r\n    apiKey: {\r\n      sepolia: process.env.ETHERSCAN_API_KEY!,\r\n      polygon: process.env.POLYGONSCAN_API_KEY!,\r\n    },\r\n  },\r\n};\r\n\r\nexport default config;\n'})}),"\n",(0,s.jsx)(n.h2,{id:"deployment-options",children:"Deployment Options"}),"\n",(0,s.jsx)(n.h3,{id:"1-quick-deployment-zero-parameters",children:"1. Quick Deployment (Zero Parameters)"}),"\n",(0,s.jsx)(n.p,{children:"Deploy with intelligent defaults:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Deploy to localhost\r\nnpx hardhat site:deploy --network localhost\r\n\r\n# Deploy to Sepolia testnet\r\nnpx hardhat site:deploy --network sepolia\r\n\r\n# Deploy to Polygon mainnet\r\nnpx hardhat site:deploy --network polygon\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-custom-configuration-deployment",children:"2. Custom Configuration Deployment"}),"\n",(0,s.jsx)(n.p,{children:"Deploy with specific settings:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Deploy with custom presets\r\nnpx hardhat site:deploy \\\r\n  --header-preset dynamic-api \\\r\n  --cors-preset allow-wttp \\\r\n  --cache-preset standard \\\r\n  --network sepolia\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-advanced-deployment",children:"3. Advanced Deployment"}),"\n",(0,s.jsx)(n.p,{children:"Deploy with custom parameters:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Deploy with custom owner\r\nnpx hardhat site:deploy \\\r\n  --owner 0x1234... \\\r\n  --network sepolia\n"})}),"\n",(0,s.jsx)(n.h2,{id:"deployment-presets",children:"Deployment Presets"}),"\n",(0,s.jsx)(n.h3,{id:"header-presets",children:"Header Presets"}),"\n",(0,s.jsx)(n.p,{children:"Configure site behavior:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Preset"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Use Case"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"static-website"})}),(0,s.jsx)(n.td,{children:"Standard caching, same-origin CORS"}),(0,s.jsx)(n.td,{children:"Static websites, blogs"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"dynamic-api"})}),(0,s.jsx)(n.td,{children:"No caching, flexible CORS"}),(0,s.jsx)(n.td,{children:"APIs, dynamic content"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"immutable"})}),(0,s.jsx)(n.td,{children:"Long-term caching, immutable flag"}),(0,s.jsx)(n.td,{children:"Static assets, documentation"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"cors-presets",children:"CORS Presets"}),"\n",(0,s.jsx)(n.p,{children:"Configure cross-origin access:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Preset"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Use Case"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"allow-all"})}),(0,s.jsx)(n.td,{children:"Allow all origins"}),(0,s.jsx)(n.td,{children:"Public websites"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"same-origin"})}),(0,s.jsx)(n.td,{children:"Strict same-origin policy"}),(0,s.jsx)(n.td,{children:"Private applications"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"allow-wttp"})}),(0,s.jsx)(n.td,{children:"Allow WTTP-powered sites"}),(0,s.jsx)(n.td,{children:"Federated applications"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"cache-presets",children:"Cache Presets"}),"\n",(0,s.jsx)(n.p,{children:"Configure caching behavior:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Preset"}),(0,s.jsx)(n.th,{children:"Description"}),(0,s.jsx)(n.th,{children:"Use Case"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"aggressive"})}),(0,s.jsx)(n.td,{children:"1 year cache"}),(0,s.jsx)(n.td,{children:"Static assets"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"standard"})}),(0,s.jsx)(n.td,{children:"1 hour cache"}),(0,s.jsx)(n.td,{children:"Dynamic content"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"none"})}),(0,s.jsx)(n.td,{children:"No caching"}),(0,s.jsx)(n.td,{children:"Real-time data"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"network-specific-deployment",children:"Network-Specific Deployment"}),"\n",(0,s.jsx)(n.h3,{id:"localhost-development",children:"Localhost Development"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Start local Hardhat node\r\nnpx hardhat node\r\n\r\n# Deploy to localhost (in another terminal)\r\nnpx hardhat site:deploy --network localhost\n"})}),"\n",(0,s.jsx)(n.h3,{id:"sepolia-testnet",children:"Sepolia Testnet"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Get test ETH from faucet\r\n# https://sepoliafaucet.com\r\n\r\n# Deploy to Sepolia\r\nnpx hardhat site:deploy --network sepolia\r\n\r\n# Verify contract\r\nnpx hardhat verify --network sepolia <SITE_ADDRESS>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"polygon-mainnet",children:"Polygon Mainnet"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Ensure you have MATIC for gas\r\n# Deploy to Polygon\r\nnpx hardhat site:deploy --network polygon\r\n\r\n# Verify contract\r\nnpx hardhat verify --network polygon <SITE_ADDRESS>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"post-deployment-setup",children:"Post-Deployment Setup"}),"\n",(0,s.jsx)(n.h3,{id:"1-verify-deployment",children:"1. Verify Deployment"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Test site functionality\r\nnpx hardhat site:fetch --site <SITE_ADDRESS> --network sepolia\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-upload-initial-content",children:"2. Upload Initial Content"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Upload website files\r\nnpx hardhat site:upload \\\r\n  --site <SITE_ADDRESS> \\\r\n  --source ./public \\\r\n  --network sepolia\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-configure-permissions",children:"3. Configure Permissions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Configure site permissions\r\nconst site = new ethers.Contract(siteAddress, siteABI, signer);\r\n\r\n// Create admin role\r\nconst adminRole = ethers.keccak256(ethers.toUtf8Bytes('/admin/*'));\r\nawait site.createResourceRole(adminRole);\r\n\r\n// Grant admin access\r\nawait site.grantRole(adminRole, adminAddress);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"production-deployment-checklist",children:"Production Deployment Checklist"}),"\n",(0,s.jsx)(n.h3,{id:"pre-deployment",children:"Pre-Deployment"}),"\n",(0,s.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Test on localhost and testnet"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Verify all functionality works"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Check gas costs and optimization"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Review security settings"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Prepare backup and recovery plan"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"deployment",children:"Deployment"}),"\n",(0,s.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Deploy to production network"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Verify contract deployment"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Upload initial content"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Configure permissions"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Test all functionality"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"post-deployment",children:"Post-Deployment"}),"\n",(0,s.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Monitor site performance"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Set up monitoring and alerts"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Document deployment details"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Train team on site management"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Plan maintenance schedule"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"deployment-monitoring",children:"Deployment Monitoring"}),"\n",(0,s.jsx)(n.h3,{id:"1-transaction-monitoring",children:"1. Transaction Monitoring"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Monitor deployment transaction using block explorer\r\n# Check transaction on Etherscan/PolygonScan\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-site-health-checks",children:"2. Site Health Checks"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Check site health by testing basic functionality\r\nconst healthCheck = await site.HEAD({ path: '/' });\r\nconsole.log('Site health status:', healthCheck.status);\r\n\r\n// Monitor site performance by monitoring events\r\n// Note: You'll need to implement event monitoring or use a service like The Graph\r\nlet resourceCount = 0;\r\nsite.on('PUTSuccess', () => {\r\n  resourceCount++;\r\n  console.log('Total resources:', resourceCount);\r\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-error-monitoring",children:"3. Error Monitoring"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Set up error monitoring\r\nconst errorHandler = (error) => {\r\n  console.error('Site error:', error);\r\n  // Send to monitoring service\r\n};\r\n\r\nsite.on('error', errorHandler);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting-deployment-issues",children:"Troubleshooting Deployment Issues"}),"\n",(0,s.jsx)(n.h3,{id:"common-problems",children:"Common Problems"}),"\n",(0,s.jsx)(n.h4,{id:"1-gas-estimation-failures",children:"1. Gas Estimation Failures"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Increase gas limit\r\nnpx hardhat site:deploy \\\r\n  --gas-limit 5000000 \\\r\n  --network sepolia\n"})}),"\n",(0,s.jsx)(n.h4,{id:"2-network-connection-issues",children:"2. Network Connection Issues"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Check network connectivity\r\nnpx hardhat node --network sepolia\r\n\r\n# Verify RPC endpoint\r\ncurl -X POST \\\r\n  -H "Content-Type: application/json" \\\r\n  -d \'{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}\' \\\r\n  https://ethereum-sepolia.publicnode.com\n'})}),"\n",(0,s.jsx)(n.h4,{id:"3-contract-verification-failures",children:"3. Contract Verification Failures"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Verify with specific constructor arguments\r\nnpx hardhat verify \\\r\n  --network sepolia \\\r\n  --constructor-args <ARGS_FILE> \\\r\n  <SITE_ADDRESS>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"debugging-tools",children:"Debugging Tools"}),"\n",(0,s.jsx)(n.h4,{id:"1-deployment-logs",children:"1. Deployment Logs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Enable verbose logging\r\nDEBUG=hardhat:site npx hardhat site:deploy --network sepolia\n"})}),"\n",(0,s.jsx)(n.h4,{id:"2-contract-inspection",children:"2. Contract Inspection"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Inspect deployed contract using block explorer\r\n# Check contract on Etherscan/PolygonScan\n"})}),"\n",(0,s.jsx)(n.h4,{id:"3-gas-analysis",children:"3. Gas Analysis"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Analyze gas usage using block explorer\r\n# Check gas usage on transaction details\n"})}),"\n",(0,s.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,s.jsx)(n.h3,{id:"1-private-key-management",children:"1. Private Key Management"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use hardware wallets for production"}),"\n",(0,s.jsx)(n.li,{children:"Never commit private keys to version control"}),"\n",(0,s.jsx)(n.li,{children:"Use environment variables for sensitive data"}),"\n",(0,s.jsx)(n.li,{children:"Implement key rotation policies"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-access-control",children:"2. Access Control"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Implement least-privilege access"}),"\n",(0,s.jsx)(n.li,{children:"Use multi-signature wallets for critical operations"}),"\n",(0,s.jsx)(n.li,{children:"Regular security audits"}),"\n",(0,s.jsx)(n.li,{children:"Monitor for unauthorized access"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-contract-security",children:"3. Contract Security"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Verify all contracts on block explorers"}),"\n",(0,s.jsx)(n.li,{children:"Use audited dependencies"}),"\n",(0,s.jsx)(n.li,{children:"Implement emergency pause mechanisms"}),"\n",(0,s.jsx)(n.li,{children:"Regular security updates"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"maintenance-and-updates",children:"Maintenance and Updates"}),"\n",(0,s.jsx)(n.h3,{id:"1-regular-maintenance",children:"1. Regular Maintenance"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Check site health by testing functionality\r\nnpx hardhat site:fetch --site <SITE_ADDRESS> --network sepolia\r\n\r\n# Update dependencies\r\nnpm update\r\n\r\n# Recompile contracts\r\nnpm run compile\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-content-updates",children:"2. Content Updates"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Update site content\r\nnpx hardhat site:upload \\\r\n  --site <SITE_ADDRESS> \\\r\n  --source ./updated-content \\\r\n  --network sepolia\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-contract-upgrades",children:"3. Contract Upgrades"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Deploy new version\r\n// Note: Contract upgrades require careful planning and migration\r\n// You'll need to implement migration logic based on your specific needs\r\n\r\n// Example: Deploy new site and migrate content\r\n// This is a simplified example - actual migration would be more complex\r\nconst newSite = await deployNewSite();\r\n\r\n// Migrate content by monitoring old site events and uploading to new site\r\n// Note: You'll need to implement event monitoring or use a service like The Graph\n"})}),"\n",(0,s.jsx)(n.h2,{id:"cost-optimization",children:"Cost Optimization"}),"\n",(0,s.jsx)(n.h3,{id:"1-gas-optimization",children:"1. Gas Optimization"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use appropriate chunk sizes"}),"\n",(0,s.jsx)(n.li,{children:"Batch operations when possible"}),"\n",(0,s.jsx)(n.li,{children:"Optimize contract code"}),"\n",(0,s.jsx)(n.li,{children:"Use gas-efficient networks"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-storage-optimization",children:"2. Storage Optimization"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Compress content before uploading"}),"\n",(0,s.jsx)(n.li,{children:"Remove unused content"}),"\n",(0,s.jsx)(n.li,{children:"Use content deduplication"}),"\n",(0,s.jsx)(n.li,{children:"Implement efficient caching"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-network-selection",children:"3. Network Selection"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use testnets for development"}),"\n",(0,s.jsx)(n.li,{children:"Choose cost-effective networks for production"}),"\n",(0,s.jsx)(n.li,{children:"Monitor gas prices"}),"\n",(0,s.jsx)(n.li,{children:"Implement gas price optimization"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"backup-and-recovery",children:"Backup and Recovery"}),"\n",(0,s.jsx)(n.h3,{id:"1-site-backup",children:"1. Site Backup"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Export site data by monitoring contract events\r\n// Note: You'll need to implement event monitoring or use a service like The Graph\r\n\r\nconst siteData = {\r\n  siteAddress: site.address,\r\n  resources: [],\r\n  timestamp: Date.now()\r\n};\r\n\r\n// Monitor events to build backup\r\nsite.on('PUTSuccess', (sender, response) => {\r\n  siteData.resources.push({\r\n    path: response.head.metadata.properties.path,\r\n    contentLength: response.head.metadata.properties.contentLength,\r\n    contentType: response.head.metadata.properties.contentType,\r\n    dataPoints: response.resource.dataPoints\r\n  });\r\n});\r\n\r\nfs.writeFileSync('site-backup.json', JSON.stringify(siteData, null, 2));\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-recovery-procedures",children:"2. Recovery Procedures"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Restore from backup\r\nconst siteData = JSON.parse(fs.readFileSync('site-backup.json', 'utf8'));\r\n\r\nfor (const resource of siteData.resources) {\r\n  const putRequest = {\r\n    head: { path: resource.path },\r\n    properties: {\r\n      contentType: resource.contentType,\r\n      contentLength: resource.contentLength\r\n    },\r\n    data: [] // Would need to reconstruct from dataPoints\r\n  };\r\n  await site.PUT(putRequest);\r\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-disaster-recovery",children:"3. Disaster Recovery"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Maintain multiple backups"}),"\n",(0,s.jsx)(n.li,{children:"Test recovery procedures"}),"\n",(0,s.jsx)(n.li,{children:"Document recovery steps"}),"\n",(0,s.jsx)(n.li,{children:"Train team on recovery processes"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"1-deployment-strategy",children:"1. Deployment Strategy"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use blue-green deployments"}),"\n",(0,s.jsx)(n.li,{children:"Implement rollback procedures"}),"\n",(0,s.jsx)(n.li,{children:"Test thoroughly before production"}),"\n",(0,s.jsx)(n.li,{children:"Monitor deployments closely"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-security",children:"2. Security"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Follow security best practices"}),"\n",(0,s.jsx)(n.li,{children:"Regular security audits"}),"\n",(0,s.jsx)(n.li,{children:"Implement access controls"}),"\n",(0,s.jsx)(n.li,{children:"Monitor for threats"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-performance",children:"3. Performance"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Optimize for your use case"}),"\n",(0,s.jsx)(n.li,{children:"Monitor performance metrics"}),"\n",(0,s.jsx)(n.li,{children:"Implement caching strategies"}),"\n",(0,s.jsx)(n.li,{children:"Regular performance reviews"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"4-documentation",children:"4. Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Document all deployments"}),"\n",(0,s.jsx)(n.li,{children:"Maintain change logs"}),"\n",(0,s.jsx)(n.li,{children:"Keep configuration up to date"}),"\n",(0,s.jsx)(n.li,{children:"Train team members"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/esp/esp-overview",children:"ESP Overview"})," - Learn about the Ethereum Storage Protocol"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/esp/esp-storage",children:"ESP Storage"})," - Detailed storage mechanisms"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>o});var i=t(6540);const s={},r=i.createContext(s);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);
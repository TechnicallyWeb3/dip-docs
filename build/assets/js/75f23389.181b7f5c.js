"use strict";(self.webpackChunkdip_docs=self.webpackChunkdip_docs||[]).push([[9696],{7390:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"wttp/wttp-methods","title":"WTTP Methods","description":"WTTP implements a comprehensive set of HTTP-like methods across three main components:","source":"@site/docs/03-wttp/02-methods.md","sourceDirName":"03-wttp","slug":"/wttp/wttp-methods","permalink":"/docs/wttp/wttp-methods","draft":false,"unlisted":false,"editUrl":"https://github.com/TechnicallyWeb3/dip-docs/tree/main/packages/create-docusaurus/templates/shared/docs/03-wttp/02-methods.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"wttp-methods","title":"WTTP Methods"},"sidebar":"tutorialSidebar","previous":{"title":"WTTP Overview","permalink":"/docs/wttp/wttp-overview"},"next":{"title":"WTTP Permissions","permalink":"/docs/wttp/wttp-permissions"}}');var t=s(4848),i=s(8453);const d={id:"wttp-methods",title:"WTTP Methods"},l="WTTP Methods",a={},c=[{value:"Supported Methods",id:"supported-methods",level:2},{value:"OPTIONS",id:"options",level:3},{value:"HEAD",id:"head",level:3},{value:"GET",id:"get",level:3},{value:"PUT",id:"put",level:3},{value:"PATCH",id:"patch",level:3},{value:"DELETE",id:"delete",level:3},{value:"DEFINE",id:"define",level:3},{value:"Gateway-Enhanced Methods",id:"gateway-enhanced-methods",level:2},{value:"LOCATE (Gateway Enhanced)",id:"locate-gateway-enhanced",level:3},{value:"GET (Gateway Enhanced)",id:"get-gateway-enhanced",level:3},{value:"HEAD (Gateway Forwarded)",id:"head-gateway-forwarded",level:3},{value:"OPTIONS (Gateway Forwarded)",id:"options-gateway-forwarded",level:3},{value:"Response Status Codes",id:"response-status-codes",level:2},{value:"Request and Response Types",id:"request-and-response-types",level:2},{value:"Chunk Requests",id:"chunk-requests",level:3},{value:"Header Information",id:"header-information",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Gas Optimization Tips",id:"gas-optimization-tips",level:2},{value:"When to Use Handler vs Gateway vs Direct Site Access",id:"when-to-use-handler-vs-gateway-vs-direct-site-access",level:2},{value:"Use WTTP Handler When (Recommended):",id:"use-wttp-handler-when-recommended",level:3},{value:"Use WTTP Gateway When:",id:"use-wttp-gateway-when",level:3},{value:"Use Direct Site Access When:",id:"use-direct-site-access-when",level:3},{value:"Performance Comparison",id:"performance-comparison",level:3},{value:"Method Permissions",id:"method-permissions",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function o(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"wttp-methods",children:"WTTP Methods"})}),"\n",(0,t.jsx)(n.p,{children:"WTTP implements a comprehensive set of HTTP-like methods across three main components:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"WTTP Sites"}),": Handle content management (PUT, PATCH, DELETE, DEFINE) and basic retrieval"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"WTTP Gateway"}),": Optimize content delivery with enhanced range requests and single-call data assembly"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"WTTP Handler"}),": Provide simplified integration with automatic contract selection and redirect management"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Each method is mapped to a smart contract function and provides familiar web semantics."}),"\n",(0,t.jsx)(n.h2,{id:"supported-methods",children:"Supported Methods"}),"\n",(0,t.jsx)(n.h3,{id:"options",children:"OPTIONS"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Discover allowed methods and CORS policies for a resource",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Gas Cost"}),": Low (read-only)",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Returns"}),": ",(0,t.jsx)(n.code,{children:"OPTIONSResponse"})," with allowed methods and CORS headers"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const response = await site.OPTIONS('/api/data');\r\nconsole.log(response.allowedMethods); // Bitmask of allowed methods\r\nconsole.log(response.corsHeaders);   // CORS configuration\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Preflight requests for CORS"}),"\n",(0,t.jsx)(n.li,{children:"API discovery"}),"\n",(0,t.jsx)(n.li,{children:"Method validation"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"head",children:"HEAD"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Retrieve metadata without downloading content",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Gas Cost"}),": Low (read-only)",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Returns"}),": ",(0,t.jsx)(n.code,{children:"HEADResponse"})," with headers, ETag, and status"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const request: HEADRequest = {\r\n  path: '/index.html',\r\n  ifNoneMatch: 'optional-etag-value'\r\n};\r\n\r\nconst response = await site.HEAD(request);\r\nconsole.log(response.status);     // 200, 304, 404, etc.\r\nconsole.log(response.etag);       // Content hash for caching\r\nconsole.log(response.headers);    // HTTP headers\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Check if content exists"}),"\n",(0,t.jsx)(n.li,{children:"Validate ETags for caching"}),"\n",(0,t.jsx)(n.li,{children:"Get file metadata without downloading"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"get",children:"GET"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Retrieve content from a resource",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Gas Cost"}),": Medium (depends on content size)",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Returns"}),": ",(0,t.jsx)(n.code,{children:"GETResponse"})," with content data and headers"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const request: GETRequest = {\r\n  path: '/index.html',\r\n  range: { start: 0, end: 1024 } // Optional: partial content\r\n};\r\n\r\nconst response = await site.GET(request);\r\nconsole.log(response.status);     // 200, 206, 404, etc.\r\nconsole.log(response.data);       // Content bytes\r\nconsole.log(response.headers);    // HTTP headers\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Download files"}),"\n",(0,t.jsx)(n.li,{children:"Serve web pages"}),"\n",(0,t.jsx)(n.li,{children:"API responses"}),"\n",(0,t.jsx)(n.li,{children:"Partial content delivery"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"put",children:"PUT"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Create or completely replace a resource",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Gas Cost"}),": High (writes to blockchain)",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Returns"}),": ",(0,t.jsx)(n.code,{children:"ContractTransaction"})," for tracking"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const htmlContent = ethers.toUtf8Bytes('<h1>Hello World</h1>');\r\nconst putRequest: PUTRequest = {\r\n  head: { path: '/index.html' },\r\n  properties: { contentType: 'text/html', contentLength: htmlContent.length },\r\n  data: [{\r\n    data: htmlContent,\r\n    publisher: signer.address\r\n  }]\r\n};\r\n\r\nconst tx = await site.PUT(putRequest);\r\nawait tx.wait();\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Upload new files (up to 32KB per chunk)"}),"\n",(0,t.jsx)(n.li,{children:"Replace existing content"}),"\n",(0,t.jsx)(n.li,{children:"Initial site deployment"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"patch",children:"PATCH"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Partially update a resource",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Gas Cost"}),": Medium (writes to blockchain)",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Returns"}),": ",(0,t.jsx)(n.code,{children:"ContractTransaction"})," for tracking"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const newData = ethers.toUtf8Bytes('updated content');\r\nconst patchRequest: PATCHRequest = {\r\n  head: { path: '/file.txt' },\r\n  data: [{\r\n    data: newData,\r\n    publisher: signer.address\r\n  }]\r\n};\r\n\r\nconst tx = await site.PATCH(patchRequest);\r\nawait tx.wait();\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Update specific chunks of files"}),"\n",(0,t.jsx)(n.li,{children:"Incremental updates for large files"}),"\n",(0,t.jsx)(n.li,{children:"Efficient content modification"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"delete",children:"DELETE"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Remove a resource",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Gas Cost"}),": Low (writes to blockchain)",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Returns"}),": ",(0,t.jsx)(n.code,{children:"ContractTransaction"})," for tracking"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const tx = await site.DELETE('/old-file.html');\r\nawait tx.wait();\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Remove outdated content"}),"\n",(0,t.jsx)(n.li,{children:"Clean up unused files"}),"\n",(0,t.jsx)(n.li,{children:"Content lifecycle management"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"define",children:"DEFINE"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Set headers and metadata for a resource",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Gas Cost"}),": Low (writes to blockchain)",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Returns"}),": ",(0,t.jsx)(n.code,{children:"ContractTransaction"})," for tracking"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const headerInfo: HeaderInfo = {\r\n  cors: {\r\n    methods: 0xffff, // Allow all methods\r\n    origins: Array(9).fill(PUBLIC_ROLE) // Allow all origins\r\n  },\r\n  cache: {\r\n    maxAge: 3600, // 1 hour cache\r\n    immutableFlag: false\r\n  },\r\n  redirect: {\r\n    code: 0, // No redirect\r\n    location: ''\r\n  }\r\n};\r\n\r\nconst tx = await site.DEFINE('/api/data', headerInfo);\r\nawait tx.wait();\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Configure CORS policies"}),"\n",(0,t.jsx)(n.li,{children:"Set cache headers"}),"\n",(0,t.jsx)(n.li,{children:"Define redirects"}),"\n",(0,t.jsx)(n.li,{children:"Mark resources as immutable"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"gateway-enhanced-methods",children:"Gateway-Enhanced Methods"}),"\n",(0,t.jsx)(n.p,{children:"The WTTP Gateway provides optimized versions of read methods with enhanced functionality for off-chain applications."}),"\n",(0,t.jsx)(n.h3,{id:"locate-gateway-enhanced",children:"LOCATE (Gateway Enhanced)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Locate resources with detailed data point information",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Gas Cost"}),": Medium (reads from multiple contracts)",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Returns"}),": ",(0,t.jsx)(n.code,{children:"LOCATEResponseSecure"})," with data point sizes and structure"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const locateRequest: LOCATERequest = {\r\n  head: { path: '/large-file.pdf' },\r\n  rangeChunks: { start: 0, end: 0 } // All chunks\r\n};\r\n\r\nconst response = await gateway.LOCATE(siteAddress, locateRequest);\r\nconsole.log(response.locate.resource.dataPoints); // Data point addresses\r\nconsole.log(response.structure.sizes);            // Individual chunk sizes\r\nconsole.log(response.structure.totalSize);        // Total file size\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Key Benefits"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Content Verification"}),": Get exact chunk sizes for hash verification"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Range Planning"}),": Understand file structure before making byte range requests"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Data Integrity"}),": Verify each chunk hasn't been tampered with"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"get-gateway-enhanced",children:"GET (Gateway Enhanced)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Retrieve content with optimized byte range support",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Gas Cost"}),": Medium to High (depends on content size and range)",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Returns"}),": ",(0,t.jsx)(n.code,{children:"GETResponse"})," with assembled content"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const getRequest: GETRequest = {\r\n  locate: {\r\n    head: { path: '/large-file.pdf' },\r\n    rangeChunks: { start: 0, end: 0 } // All chunks\r\n  },\r\n  rangeBytes: { start: 1024, end: 2047 } // Specific byte range\r\n};\r\n\r\nconst response = await gateway.GET(siteAddress, getRequest);\r\nconsole.log(response.head.status);     // 200, 206, 404, etc.\r\nconsole.log(response.body.data);       // Requested byte range\r\nconsole.log(response.body.sizes);      // Data point size information\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Key Benefits"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Single Call"}),": One blockchain transaction instead of N+1 calls"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Efficient Ranges"}),": Fetch only the bytes you need"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Automatic Assembly"}),": Seamlessly combines data from multiple chunks"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Performance"}),": Significantly faster than direct site access"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"head-gateway-forwarded",children:"HEAD (Gateway Forwarded)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Retrieve metadata without downloading content",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Gas Cost"}),": Low (read-only)",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Returns"}),": ",(0,t.jsx)(n.code,{children:"HEADResponse"})," with headers and metadata"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const headRequest: HEADRequest = {\r\n  path: '/index.html',\r\n  ifNoneMatch: 'optional-etag-value'\r\n};\r\n\r\nconst response = await gateway.HEAD(siteAddress, headRequest);\r\nconsole.log(response.status);     // 200, 304, 404, etc.\r\nconsole.log(response.etag);       // Content hash for caching\r\nconsole.log(response.metadata);   // File metadata\n"})}),"\n",(0,t.jsx)(n.h3,{id:"options-gateway-forwarded",children:"OPTIONS (Gateway Forwarded)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Purpose"}),": Discover allowed methods and CORS policies",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Gas Cost"}),": Low (read-only)",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Returns"}),": ",(0,t.jsx)(n.code,{children:"OPTIONSResponse"})," with allowed methods"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const response = await gateway.OPTIONS(siteAddress, '/api/data');\r\nconsole.log(response.allowedMethods); // Bitmask of allowed methods\r\nconsole.log(response.status);         // Response status\n"})}),"\n",(0,t.jsx)(n.h2,{id:"response-status-codes",children:"Response Status Codes"}),"\n",(0,t.jsx)(n.p,{children:"WTTP Site uses standard HTTP status codes:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Code"}),(0,t.jsx)(n.th,{children:"Status"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"200"}),(0,t.jsx)(n.td,{children:"OK"}),(0,t.jsx)(n.td,{children:"Request successful"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"201"}),(0,t.jsx)(n.td,{children:"Created"}),(0,t.jsx)(n.td,{children:"Resource created successfully"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"204"}),(0,t.jsx)(n.td,{children:"No Content"}),(0,t.jsx)(n.td,{children:"Request successful, no content returned"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"206"}),(0,t.jsx)(n.td,{children:"Partial Content"}),(0,t.jsx)(n.td,{children:"Range request successful"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"304"}),(0,t.jsx)(n.td,{children:"Not Modified"}),(0,t.jsx)(n.td,{children:"Content unchanged (ETag match)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"400"}),(0,t.jsx)(n.td,{children:"Bad Request"}),(0,t.jsx)(n.td,{children:"Invalid request parameters"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"403"}),(0,t.jsx)(n.td,{children:"Forbidden"}),(0,t.jsx)(n.td,{children:"Access denied"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"404"}),(0,t.jsx)(n.td,{children:"Not Found"}),(0,t.jsx)(n.td,{children:"Resource doesn't exist"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"405"}),(0,t.jsx)(n.td,{children:"Method Not Allowed"}),(0,t.jsx)(n.td,{children:"Method not supported for resource"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"410"}),(0,t.jsx)(n.td,{children:"Gone"}),(0,t.jsx)(n.td,{children:"Resource was deleted or is immutable"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"500"}),(0,t.jsx)(n.td,{children:"Internal Server Error"}),(0,t.jsx)(n.td,{children:"Contract execution error"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"request-and-response-types",children:"Request and Response Types"}),"\n",(0,t.jsx)(n.h3,{id:"chunk-requests",children:"Chunk Requests"}),"\n",(0,t.jsx)(n.p,{children:"For partial content delivery using chunk indices:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface Range {\r\n  start: number; // Start chunk index (inclusive)\r\n  end: number;   // End chunk index (inclusive)\r\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"header-information",children:"Header Information"}),"\n",(0,t.jsx)(n.p,{children:"Configure resource behavior:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"interface HeaderInfo {\r\n  cors: {\r\n    methods: number;        // Bitmask of allowed methods\r\n    origins: string[];      // Array of 9 role IDs (32-byte hashes)\r\n  };\r\n  cache: {\r\n    maxAge: number;         // Cache duration in seconds\r\n    immutableFlag: boolean; // Mark as immutable\r\n  };\r\n  redirect: {\r\n    code: number;           // HTTP redirect code\r\n    location: string;       // Redirect URL\r\n  };\r\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,t.jsx)(n.p,{children:"All methods return structured error information:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"try {\r\n  const response = await site.GET({ path: '/nonexistent.html' });\r\n  if (response.status === 404) {\r\n    console.log('File not found');\r\n  }\r\n} catch (error) {\r\n  console.error('Contract error:', error);\r\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"gas-optimization-tips",children:"Gas Optimization Tips"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use HEAD before GET"}),": Check if content exists before downloading"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Implement ETags"}),": Use conditional requests to avoid re-downloading"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Chunk Requests"}),": Download only the chunks you need"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Batch Operations"}),": Group multiple operations in a single transaction when possible"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Chunk Large Files"}),": Files larger than 32KB must be chunked using PUT followed by PATCH operations"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"when-to-use-handler-vs-gateway-vs-direct-site-access",children:"When to Use Handler vs Gateway vs Direct Site Access"}),"\n",(0,t.jsx)(n.h3,{id:"use-wttp-handler-when-recommended",children:"Use WTTP Handler When (Recommended):"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Building Applications"}),": Most developers should start with the handler"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Simplified Integration"}),": Want automatic contract selection and redirect handling"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Error Management"}),": Need comprehensive error handling and recovery"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Rapid Development"}),": Want the simplest possible integration"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"use-wttp-gateway-when",children:"Use WTTP Gateway When:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Advanced Control"}),": Need fine-grained control over range requests"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Performance Critical"}),": Building high-performance applications"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Custom Logic"}),": Implementing custom content delivery logic"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Large File Delivery"}),": Working extensively with large files"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"use-direct-site-access-when",children:"Use Direct Site Access When:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Content Management"}),": Uploading, updating, or deleting content"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Permission Management"}),": Configuring roles and access controls"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Site Administration"}),": Managing site-wide settings and headers"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Simple Retrieval"}),": Fetching small files that fit in a single data point"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"performance-comparison",children:"Performance Comparison"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Operation"}),(0,t.jsx)(n.th,{children:"Direct Site"}),(0,t.jsx)(n.th,{children:"Gateway"}),(0,t.jsx)(n.th,{children:"Handler"}),(0,t.jsx)(n.th,{children:"Improvement"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Small file (1 chunk)"}),(0,t.jsx)(n.td,{children:"2 calls"}),(0,t.jsx)(n.td,{children:"1 call"}),(0,t.jsx)(n.td,{children:"1 call"}),(0,t.jsx)(n.td,{children:"2x faster"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Large file (10 chunks)"}),(0,t.jsx)(n.td,{children:"11 calls"}),(0,t.jsx)(n.td,{children:"1 call"}),(0,t.jsx)(n.td,{children:"1 call"}),(0,t.jsx)(n.td,{children:"11x faster"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Range request"}),(0,t.jsx)(n.td,{children:"11+ calls"}),(0,t.jsx)(n.td,{children:"1 call"}),(0,t.jsx)(n.td,{children:"1 call"}),(0,t.jsx)(n.td,{children:"11x+ faster"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Content verification"}),(0,t.jsx)(n.td,{children:"Manual"}),(0,t.jsx)(n.td,{children:"Automatic"}),(0,t.jsx)(n.td,{children:"Automatic"}),(0,t.jsx)(n.td,{children:"Built-in"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Redirect handling"}),(0,t.jsx)(n.td,{children:"Manual"}),(0,t.jsx)(n.td,{children:"Manual"}),(0,t.jsx)(n.td,{children:"Automatic"}),(0,t.jsx)(n.td,{children:"Built-in"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Contract selection"}),(0,t.jsx)(n.td,{children:"Manual"}),(0,t.jsx)(n.td,{children:"Manual"}),(0,t.jsx)(n.td,{children:"Automatic"}),(0,t.jsx)(n.td,{children:"Built-in"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"method-permissions",children:"Method Permissions"}),"\n",(0,t.jsx)(n.p,{children:"Each method can be restricted by role:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DEFAULT_ADMIN_ROLE"}),": Can use all methods"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"SITE_ADMIN_ROLE"}),": Can manage site configuration"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Resource Roles"}),": Custom roles for specific paths"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Public"}),": Anyone can use the method"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Blacklist"}),": Explicitly denied access"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["See the ",(0,t.jsx)(n.a,{href:"/docs/wttp/wttp-permissions",children:"Permissions Guide"})," for detailed information about access control."]}),"\n",(0,t.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/esp/esp-overview",children:"ESP Overview"})," - Learn about the Ethereum Storage Protocol"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/esp/esp-storage",children:"ESP Storage"})," - Detailed storage mechanisms"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>l});var r=s(6540);const t={},i=r.createContext(t);function d(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);